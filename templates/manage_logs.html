{% extends 'base.html' %}
{% load static %}
{% block content %}
{% if message %}
<div class="alert alert-success" role="alert">
    {{message}}
</div>
{% endif %}

{% if logs %}
<form method="post">
    <input type="hidden" name="action" value="handle_log"> 
    <div class="form-group">
        {% csrf_token %}
        <h4>Uploaded Logs:</h1>
        <select class="form-select form-select-lg" id="fileSelect" multiple name='pk' aria-label="multipe form-select-lg example ">
            {% for log in logs %}
            <option value="{{log.pk}}">{{log.log_name}}</option>
            {% endfor %}
        </select>
    </div>
    <button name ="delete" class="btn btn-danger" type="submit">Delete</button>
    <button name="view_log" class="btn btn-success" >View Log</button>
</form>
{% else %}
        <p>No logs uploaded</p>
{% endif %}


<form method="post" enctype="multipart/form-data">
    <input type="hidden" name="action" value="upload"> 
    <div class="form-group">
        {% csrf_token %}
        <h4>Upload Log:</h4>
        <label for="formFileDisabled" class="form-label">Select a file to upload</label>
        <input class="form-control" type="file" name="log_file" id="formFileDisabled" accept=".xes, .csv"/>
        <button class="btn btn-success my-4" type="submit" >Upload new log</button>
        {% if error %}
        <p>{{error}}</p>
        {% endif %}
    </div>
</form>
{% endblock %}